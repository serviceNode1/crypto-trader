<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Trading Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        h1 {
            font-size: 28px;
            color: #667eea;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-weight: 500;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .metric:last-child {
            border-bottom: none;
        }

        .metric-label {
            font-weight: 500;
            color: #666;
        }

        .metric-value {
            font-size: 20px;
            font-weight: bold;
        }

        .positive {
            color: #10b981;
        }

        .negative {
            color: #ef4444;
        }

        .neutral {
            color: #6b7280;
        }

        .button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.3s;
        }

        .button:hover {
            background: #5568d3;
        }

        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #666;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-up {
            background: #10b981;
        }

        .status-down {
            background: #ef4444;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-buy {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-sell {
            background: #fee2e2;
            color: #991b1b;
        }

        .badge-hold {
            background: #e5e7eb;
            color: #374151;
        }

        .refresh-btn {
            float: right;
            font-size: 12px;
            padding: 6px 12px;
        }

        /* Info Button */
        .info-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .info-button:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
            animation: slideUp 0.3s;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 24px;
        }

        .close-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s;
        }

        .close-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .modal-tabs {
            display: flex;
            background: #f3f4f6;
            border-bottom: 2px solid #e5e7eb;
        }

        .tab-button {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab-button:hover {
            background: #e5e7eb;
        }

        .tab-button.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: white;
        }

        .modal-body {
            padding: 30px;
            overflow-y: auto;
            flex: 1;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .info-section {
            margin-bottom: 30px;
        }

        .info-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 10px;
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .info-table th,
        .info-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .info-table th {
            background: #f3f4f6;
            font-weight: 600;
            color: #374151;
        }

        .info-table tr:hover {
            background: #f9fafb;
        }

        .tip-box {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .tip-box strong {
            color: #3b82f6;
        }

        .warning-box {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .warning-box strong {
            color: #ef4444;
        }

        .success-box {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .success-box strong {
            color: #10b981;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1>Crypto Trading Dashboard</h1>
                    <p class="subtitle">AI-Powered Paper Trading System | Starting Capital: $10,000</p>
                </div>
                <button class="info-button" onclick="openInfoModal()" title="Trading Guide & Information">
                    💡
                </button>
            </div>
        </header>

        <div class="warning">
            ⚠️ <strong>PAPER TRADING MODE</strong> - This system uses virtual money only. No real trades are executed.
        </div>

        <!-- Portfolio Overview -->
        <div class="grid">
            <div class="card">
                <h2>Portfolio Overview <button class="button refresh-btn" onclick="loadPortfolio()">↻ Refresh</button></h2>
                <div id="portfolio-metrics" class="loading">Loading...</div>
            </div>

            <div class="card">
                <h2>Performance Metrics</h2>
                <div id="performance-metrics" class="loading">Loading...</div>
            </div>

            <div class="card">
                <h2>Risk Exposure</h2>
                <div id="risk-metrics" class="loading">Loading...</div>
            </div>
        </div>

        <!-- Charts -->
        <div class="grid">
            <div class="card">
                <h2>Portfolio Value Over Time</h2>
                <div class="chart-container">
                    <canvas id="portfolioChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Holdings & Recommendations -->
        <div class="grid">
            <div class="card">
                <h2>Current Holdings</h2>
                <div id="holdings-list" class="loading">Loading...</div>
            </div>

            <div class="card">
                <h2>AI Recommendations</h2>
                <div id="recommendations-list" class="loading">Loading...</div>
            </div>
        </div>

        <!-- Trade History -->
        <div class="card">
            <h2>Recent Trades <button class="button refresh-btn" onclick="loadTrades()">↻ Refresh</button></h2>
            <div id="trades-list" class="loading">Loading...</div>
        </div>

        <!-- Market Context -->
        <div class="card">
            <h2>Market Context</h2>
            <div id="market-context" class="loading">Loading...</div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin + '/api';

        // Load portfolio data
        async function loadPortfolio() {
            try {
                const response = await fetch(`${API_BASE}/portfolio`);
                const data = await response.json();

                const metricsHTML = `
                    <div class="metric">
                        <span class="metric-label">Total Value</span>
                        <span class="metric-value">$${data.totalValue.toFixed(2)}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Cash Balance</span>
                        <span class="metric-value">$${data.cash.toFixed(2)}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Total Return</span>
                        <span class="metric-value ${data.totalReturn >= 0 ? 'positive' : 'negative'}">
                            ${data.totalReturn >= 0 ? '+' : ''}$${data.totalReturn.toFixed(2)}
                            (${data.totalReturnPercent.toFixed(2)}%)
                        </span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Open Positions</span>
                        <span class="metric-value">${data.positions.length}</span>
                    </div>
                `;

                document.getElementById('portfolio-metrics').innerHTML = metricsHTML;

                // Display holdings
                if (data.positions.length > 0) {
                    const holdingsHTML = `
                        <table>
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Quantity</th>
                                    <th>Avg Price</th>
                                    <th>Current Value</th>
                                    <th>P&L</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.positions.map(pos => `
                                    <tr>
                                        <td><strong>${pos.symbol}</strong></td>
                                        <td>${pos.quantity.toFixed(4)}</td>
                                        <td>$${pos.averagePrice.toFixed(2)}</td>
                                        <td>$${pos.currentValue.toFixed(2)}</td>
                                        <td class="${pos.unrealizedPnL >= 0 ? 'positive' : 'negative'}">
                                            ${pos.unrealizedPnL >= 0 ? '+' : ''}$${pos.unrealizedPnL.toFixed(2)}
                                            (${pos.unrealizedPnLPercent.toFixed(2)}%)
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                    document.getElementById('holdings-list').innerHTML = holdingsHTML;
                } else {
                    document.getElementById('holdings-list').innerHTML = '<p>No open positions</p>';
                }
            } catch (error) {
                console.error('Failed to load portfolio:', error);
                document.getElementById('portfolio-metrics').innerHTML = '<p class="negative">Failed to load data</p>';
            }
        }

        // Load performance metrics
        async function loadPerformance() {
            try {
                const response = await fetch(`${API_BASE}/portfolio/performance`);
                const data = await response.json();

                const metricsHTML = `
                    <div class="metric">
                        <span class="metric-label">Sharpe Ratio</span>
                        <span class="metric-value">${data.sharpeRatio.toFixed(2)}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Max Drawdown</span>
                        <span class="metric-value negative">${(data.maxDrawdown * 100).toFixed(2)}%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Win Rate</span>
                        <span class="metric-value">${(data.winRate * 100).toFixed(1)}%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Total Trades</span>
                        <span class="metric-value">${data.totalTrades}</span>
                    </div>
                `;

                document.getElementById('performance-metrics').innerHTML = metricsHTML;
            } catch (error) {
                console.error('Failed to load performance:', error);
            }
        }

        // Load risk metrics
        async function loadRisk() {
            try {
                const response = await fetch(`${API_BASE}/portfolio/risk`);
                const data = await response.json();

                const metricsHTML = `
                    <div class="metric">
                        <span class="metric-label">Portfolio Risk</span>
                        <span class="metric-value">${data.portfolioRisk.toFixed(2)}%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Daily Loss</span>
                        <span class="metric-value">${data.dailyLoss.toFixed(2)}%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Capital Utilization</span>
                        <span class="metric-value">${data.utilizationPercent.toFixed(1)}%</span>
                    </div>
                `;

                document.getElementById('risk-metrics').innerHTML = metricsHTML;
            } catch (error) {
                console.error('Failed to load risk:', error);
            }
        }

        // Load trades
        async function loadTrades() {
            try {
                const response = await fetch(`${API_BASE}/trades?limit=20`);
                const data = await response.json();

                if (data.length > 0) {
                    const tradesHTML = `
                        <table>
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Symbol</th>
                                    <th>Side</th>
                                    <th>Quantity</th>
                                    <th>Price</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.map(trade => `
                                    <tr>
                                        <td>${new Date(trade.executedAt).toLocaleString()}</td>
                                        <td><strong>${trade.symbol}</strong></td>
                                        <td><span class="badge badge-${trade.side.toLowerCase()}">${trade.side}</span></td>
                                        <td>${trade.quantity.toFixed(4)}</td>
                                        <td>$${trade.price.toFixed(2)}</td>
                                        <td>$${trade.totalCost.toFixed(2)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                    document.getElementById('trades-list').innerHTML = tradesHTML;
                } else {
                    document.getElementById('trades-list').innerHTML = '<p>No trades yet</p>';
                }
            } catch (error) {
                console.error('Failed to load trades:', error);
            }
        }

        // Load recommendations
        async function loadRecommendations() {
            try {
                const response = await fetch(`${API_BASE}/recommendations?limit=5`);
                const data = await response.json();

                if (data.length > 0) {
                    const recsHTML = data.map(rec => `
                        <div style="border-bottom: 1px solid #eee; padding: 15px 0;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <strong style="font-size: 16px;">${rec.symbol}</strong>
                                <span class="badge badge-${rec.action.toLowerCase()}">${rec.action}</span>
                            </div>
                            <div style="color: #666; font-size: 14px;">
                                Confidence: <strong>${rec.confidence}%</strong> | 
                                Risk: <strong>${rec.riskLevel}</strong>
                            </div>
                            ${rec.entryPrice ? `<div style="color: #666; font-size: 14px;">Entry: $${rec.entryPrice.toFixed(2)}</div>` : ''}
                            ${rec.stopLoss ? `<div style="color: #666; font-size: 14px;">Stop Loss: $${rec.stopLoss.toFixed(2)}</div>` : ''}
                        </div>
                    `).join('');
                    document.getElementById('recommendations-list').innerHTML = recsHTML;
                } else {
                    document.getElementById('recommendations-list').innerHTML = '<p>No active recommendations</p>';
                }
            } catch (error) {
                console.error('Failed to load recommendations:', error);
            }
        }

        // Load market context
        async function loadMarketContext() {
            try {
                const response = await fetch(`${API_BASE}/market-context`);
                const data = await response.json();

                const contextHTML = `
                    <div class="metric">
                        <span class="metric-label">BTC Dominance</span>
                        <span class="metric-value">${data.context.btcDominance.toFixed(2)}%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Market Regime</span>
                        <span class="metric-value">${data.context.marketRegime.toUpperCase()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Risk Sentiment</span>
                        <span class="metric-value">${data.context.riskSentiment.toUpperCase()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">VIX</span>
                        <span class="metric-value">${data.context.traditionalMarkets.vix.toFixed(2)}</span>
                    </div>
                `;

                document.getElementById('market-context').innerHTML = contextHTML;
            } catch (error) {
                console.error('Failed to load market context:', error);
            }
        }

        // Load all data on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadPortfolio();
            loadPerformance();
            loadRisk();
            loadTrades();
            loadRecommendations();
            loadMarketContext();

            // Refresh every 60 seconds
            setInterval(() => {
                loadPortfolio();
                loadPerformance();
                loadRisk();
            }, 60000);
        });

        // Modal control functions
        function openInfoModal() {
            document.getElementById('infoModal').classList.add('active');
        }

        function closeInfoModal() {
            document.getElementById('infoModal').classList.remove('active');
        }

        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            // Remove active from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('infoModal');
            if (event.target === modal) {
                closeInfoModal();
            }
        });
    </script>

    <!-- Information Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>💡 Trading Guide & Information</h2>
                <button class="close-button" onclick="closeInfoModal()">×</button>
            </div>
            
            <div class="modal-tabs">
                <button class="tab-button active" onclick="switchTab('indicators')">📊 Market Indicators</button>
                <button class="tab-button" onclick="switchTab('trading')">💰 Trading Tips</button>
                <button class="tab-button" onclick="switchTab('risk')">🛡️ Risk Management</button>
                <button class="tab-button" onclick="switchTab('platform')">🚀 Platform Guide</button>
            </div>
            
            <div class="modal-body">
                <!-- Market Indicators Tab -->
                <div id="indicators" class="tab-content active">
                    <div class="info-section">
                        <h3>📈 BTC Dominance</h3>
                        <p><strong>Source:</strong> CoinGecko API - Global Market Data</p>
                        <p><strong>What it means:</strong> Bitcoin's market cap as a percentage of total cryptocurrency market cap.</p>
                        
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>Level</th>
                                    <th>Market State</th>
                                    <th>What It Means</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>&gt; 60%</strong></td>
                                    <td>High Dominance</td>
                                    <td>Bitcoin leading, altcoins underperforming</td>
                                </tr>
                                <tr>
                                    <td><strong>40-60%</strong></td>
                                    <td>Balanced Market</td>
                                    <td>Healthy distribution between BTC and alts</td>
                                </tr>
                                <tr>
                                    <td><strong>&lt; 40%</strong></td>
                                    <td>"Alt Season"</td>
                                    <td>Altcoins outperforming Bitcoin</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="tip-box">
                            <strong>💡 Trading Signal:</strong> Rising BTC dominance = Money flowing INTO Bitcoin (risk-off behavior). Falling dominance = Money flowing INTO altcoins (risk-on behavior).
                        </div>
                    </div>

                    <div class="info-section">
                        <h3>🎯 Market Regime</h3>
                        <p><strong>Source:</strong> Custom analysis based on 30-day price movements and volatility</p>
                        <p><strong>How it's calculated:</strong> Analyzes BTC price changes, daily ranges, and trend direction</p>
                        
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>Regime</th>
                                    <th>Condition</th>
                                    <th>Strategy</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>BULL 🐂</strong></td>
                                    <td>Price up &gt;10% in 30 days, low volatility</td>
                                    <td>Long positions, momentum trading</td>
                                </tr>
                                <tr>
                                    <td><strong>BEAR 🐻</strong></td>
                                    <td>Price down &gt;10% in 30 days</td>
                                    <td>Defensive, short positions, or cash</td>
                                </tr>
                                <tr>
                                    <td><strong>SIDEWAYS ↔️</strong></td>
                                    <td>Price change &lt;10%, consolidating</td>
                                    <td>Range trading, wait for breakout</td>
                                </tr>
                                <tr>
                                    <td><strong>HIGH_VOLATILITY ⚡</strong></td>
                                    <td>Daily range &gt;5%</td>
                                    <td>Reduce positions, tight stop-losses</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="info-section">
                        <h3>💼 Risk Sentiment</h3>
                        <p><strong>Source:</strong> Alpha Vantage - Traditional market indicators (S&P 500, Gold, VIX)</p>
                        <p><strong>Why it matters:</strong> Crypto shows ~40-60% correlation with traditional markets</p>
                        
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>Sentiment</th>
                                    <th>Indicators</th>
                                    <th>Impact on Crypto</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong style="color: #10b981;">RISK-ON</strong></td>
                                    <td>S&P 500 ↑, VIX ↓, Gold ↓</td>
                                    <td>✅ Positive - Investors buying risky assets</td>
                                </tr>
                                <tr>
                                    <td><strong style="color: #ef4444;">RISK-OFF</strong></td>
                                    <td>S&P 500 ↓, VIX ↑, Gold ↑</td>
                                    <td>❌ Negative - Investors seeking safety</td>
                                </tr>
                                <tr>
                                    <td><strong style="color: #6b7280;">NEUTRAL</strong></td>
                                    <td>Mixed signals</td>
                                    <td>⚠️ Uncertain market direction</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="warning-box">
                            <strong>⚠️ Important:</strong> Risk-off sentiment typically precedes crypto selloffs. Use this as an early warning system.
                        </div>
                    </div>

                    <div class="info-section">
                        <h3>📉 VIX (Volatility Index)</h3>
                        <p><strong>Source:</strong> Alpha Vantage - CBOE Volatility Index (^VIX)</p>
                        <p><strong>What it is:</strong> Measures expected 30-day volatility in the S&P 500</p>
                        <p><strong>Nickname:</strong> "The Fear Index"</p>
                        
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>VIX Level</th>
                                    <th>Market State</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>&lt; 15</strong></td>
                                    <td>😌 Calm, Low Fear</td>
                                    <td>Normal trading operations</td>
                                </tr>
                                <tr>
                                    <td><strong>15-20</strong></td>
                                    <td>😐 Normal Volatility</td>
                                    <td>Monitor market closely</td>
                                </tr>
                                <tr>
                                    <td><strong>20-30</strong></td>
                                    <td>😰 Elevated Fear</td>
                                    <td>Reduce position sizes</td>
                                </tr>
                                <tr>
                                    <td><strong>&gt; 30</strong></td>
                                    <td>😱 High Panic</td>
                                    <td>🚨 High risk - defensive positions</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="warning-box">
                            <strong>🚨 Current Alert:</strong> If VIX > 30, expect increased crypto volatility and potential selloffs. Consider reducing leverage and tightening stop-losses.
                        </div>
                    </div>
                </div>

                <!-- Trading Tips Tab -->
                <div id="trading" class="tab-content">
                    <div class="info-section">
                        <h3>🎯 Core Trading Principles</h3>
                        
                        <div class="success-box">
                            <strong>✅ DO:</strong>
                            <ul>
                                <li>Trade with a plan - know your entry, exit, and stop-loss before trading</li>
                                <li>Use position sizing - never risk more than 1-2% of capital per trade</li>
                                <li>Follow the trend - "The trend is your friend until it ends"</li>
                                <li>Use technical AND fundamental analysis together</li>
                                <li>Keep a trading journal - track what works and what doesn't</li>
                                <li>Wait for confirmation - don't chase pumps</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong>❌ DON'T:</strong>
                            <ul>
                                <li>Trade based on emotions (FOMO, panic)</li>
                                <li>Risk money you can't afford to lose</li>
                                <li>Ignore stop-losses - they're your safety net</li>
                                <li>Overtrade - quality over quantity</li>
                                <li>Average down on losing positions</li>
                                <li>Trade without understanding why</li>
                            </ul>
                        </div>
                    </div>

                    <div class="info-section">
                        <h3>📊 Technical Analysis Tips</h3>
                        
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>Indicator</th>
                                    <th>Best Use</th>
                                    <th>Signal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>RSI (14)</strong></td>
                                    <td>Overbought/Oversold</td>
                                    <td>&gt;70 = Overbought, &lt;30 = Oversold</td>
                                </tr>
                                <tr>
                                    <td><strong>MACD</strong></td>
                                    <td>Trend & Momentum</td>
                                    <td>Line crosses = Trend changes</td>
                                </tr>
                                <tr>
                                    <td><strong>Bollinger Bands</strong></td>
                                    <td>Volatility & Breakouts</td>
                                    <td>Price at edges = Reversal or breakout</td>
                                </tr>
                                <tr>
                                    <td><strong>Volume</strong></td>
                                    <td>Confirm Trends</td>
                                    <td>Rising volume = Strong move</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="tip-box">
                            <strong>💡 Pro Tip:</strong> No single indicator is perfect. Use multiple indicators together for confirmation. If RSI, MACD, and trend all align - that's a strong signal!
                        </div>
                    </div>

                    <div class="info-section">
                        <h3>🎯 Entry & Exit Strategies</h3>
                        
                        <p><strong>Best Entry Signals:</strong></p>
                        <ul>
                            <li>✅ Price bounces off support + RSI oversold</li>
                            <li>✅ MACD crossover + bullish candle pattern</li>
                            <li>✅ Breakout above resistance with high volume</li>
                            <li>✅ Positive market regime + risk-on sentiment</li>
                        </ul>

                        <p><strong>Exit Signals (Protect Profits):</strong></p>
                        <ul>
                            <li>🎯 Take partial profits at +20%, +50%, +100%</li>
                            <li>🎯 Trail stop-loss as price rises</li>
                            <li>🎯 Exit when indicators turn bearish</li>
                            <li>🎯 Exit when market regime changes to bearish</li>
                        </ul>
                    </div>
                </div>

                <!-- Risk Management Tab -->
                <div id="risk" class="tab-content">
                    <div class="info-section">
                        <h3>🛡️ Position Sizing Formula</h3>
                        
                        <div class="success-box">
                            <strong>Safe Position Size =</strong><br>
                            (Account Size × Risk %) ÷ (Entry Price - Stop Loss Price)<br><br>
                            <strong>Example:</strong><br>
                            - Account: $10,000<br>
                            - Risk per trade: 2% = $200<br>
                            - Entry: $50,000<br>
                            - Stop Loss: $48,000<br>
                            - Position Size: $200 ÷ $2,000 = 0.1 BTC
                        </div>

                        <div class="warning-box">
                            <strong>⚠️ Golden Rules:</strong>
                            <ul>
                                <li>Never risk more than 2% per trade</li>
                                <li>Maximum 20% total portfolio risk at once</li>
                                <li>Larger position = Tighter stop-loss</li>
                            </ul>
                        </div>
                    </div>

                    <div class="info-section">
                        <h3>📉 Stop-Loss Strategies</h3>
                        
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>When to Use</th>
                                    <th>How to Set</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Fixed %</strong></td>
                                    <td>Volatile assets</td>
                                    <td>5-10% below entry</td>
                                </tr>
                                <tr>
                                    <td><strong>Support Level</strong></td>
                                    <td>Trending markets</td>
                                    <td>Just below key support</td>
                                </tr>
                                <tr>
                                    <td><strong>ATR-Based</strong></td>
                                    <td>Any market</td>
                                    <td>2-3× ATR below entry</td>
                                </tr>
                                <tr>
                                    <td><strong>Trailing</strong></td>
                                    <td>Strong trends</td>
                                    <td>Move up as price rises</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="info-section">
                        <h3>⚖️ Risk/Reward Ratios</h3>
                        
                        <div class="tip-box">
                            <strong>💡 Minimum Ratios:</strong><br>
                            - Conservative: 1:3 (Risk $100 to make $300)<br>
                            - Moderate: 1:2 (Risk $100 to make $200)<br>
                            - Never take trades below 1:1.5 ratio<br><br>
                            
                            <strong>Why it matters:</strong> With a 1:3 ratio, you only need 33% win rate to be profitable!
                        </div>
                    </div>

                    <div class="info-section">
                        <h3>🚨 When to Reduce Risk</h3>
                        <ul>
                            <li>❌ VIX above 30 - High market fear</li>
                            <li>❌ Market regime = HIGH_VOLATILITY</li>
                            <li>❌ Risk sentiment = RISK-OFF</li>
                            <li>❌ Multiple losing trades in a row</li>
                            <li>❌ BTC dominance rapidly changing</li>
                            <li>❌ Low volume / low liquidity periods</li>
                        </ul>

                        <div class="warning-box">
                            <strong>⚠️ Defense Mode:</strong> When 2+ risk factors are present, reduce position sizes by 50% or move to cash. Preservation of capital is the #1 priority.
                        </div>
                    </div>
                </div>

                <!-- Platform Guide Tab -->
                <div id="platform" class="tab-content">
                    <div class="info-section">
                        <h3>🎮 How to Use This Platform</h3>
                        
                        <p><strong>Current Features:</strong></p>
                        <ul>
                            <li>✅ Real-time market data from multiple sources</li>
                            <li>✅ AI-powered trade recommendations</li>
                            <li>✅ Portfolio tracking ($10,000 starting capital)</li>
                            <li>✅ Technical indicator analysis</li>
                            <li>✅ Sentiment analysis (Reddit + News)</li>
                            <li>✅ Market context monitoring</li>
                            <li>✅ Paper trading (virtual money only)</li>
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>📊 Dashboard Sections Explained</h3>
                        
                        <p><strong>Portfolio Overview:</strong> Your virtual account balance, positions, and returns</p>
                        
                        <p><strong>Performance Metrics:</strong></p>
                        <ul>
                            <li><strong>Sharpe Ratio:</strong> Risk-adjusted returns (&gt;1 is good)</li>
                            <li><strong>Max Drawdown:</strong> Largest peak-to-trough decline</li>
                            <li><strong>Win Rate:</strong> Percentage of profitable trades</li>
                        </ul>

                        <p><strong>Market Context:</strong> Real-time macro indicators affecting crypto</p>
                        
                        <p><strong>AI Recommendations:</strong> Machine learning-powered trade suggestions</p>
                    </div>

                    <div class="info-section">
                        <h3>🔄 Data Sources</h3>
                        
                        <table class="info-table">
                            <thead>
                                <tr>
                                    <th>Source</th>
                                    <th>Data Type</th>
                                    <th>Update Frequency</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>CoinGecko</strong></td>
                                    <td>Prices, Market Cap, Dominance</td>
                                    <td>Real-time</td>
                                </tr>
                                <tr>
                                    <td><strong>Binance</strong></td>
                                    <td>Candlesticks, Volume, Orderbook</td>
                                    <td>Real-time</td>
                                </tr>
                                <tr>
                                    <td><strong>Reddit</strong></td>
                                    <td>Social Sentiment</td>
                                    <td>Hourly</td>
                                </tr>
                                <tr>
                                    <td><strong>CryptoPanic</strong></td>
                                    <td>News & Events</td>
                                    <td>Real-time</td>
                                </tr>
                                <tr>
                                    <td><strong>Alpha Vantage</strong></td>
                                    <td>Traditional Markets (S&P, VIX, Gold)</td>
                                    <td>Daily</td>
                                </tr>
                                <tr>
                                    <td><strong>OpenAI/Anthropic</strong></td>
                                    <td>AI Analysis & Recommendations</td>
                                    <td>On-demand</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="info-section">
                        <h3>⚠️ Important Disclaimers</h3>
                        
                        <div class="warning-box">
                            <strong>🚨 Paper Trading Only:</strong><br>
                            This platform uses VIRTUAL MONEY only. No real cryptocurrency is bought or sold. This is for learning and testing strategies only.
                        </div>

                        <div class="tip-box">
                            <strong>💡 Best Practices:</strong>
                            <ul>
                                <li>Treat virtual money as real - take it seriously</li>
                                <li>Test different strategies</li>
                                <li>Learn from mistakes without financial risk</li>
                                <li>Build confidence before real trading</li>
                                <li>Track your decision-making process</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <strong>⚠️ Not Financial Advice:</strong><br>
                            This platform provides educational information and analysis tools. All recommendations are for educational purposes only. Always do your own research and consult with financial advisors before making real investment decisions.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
